@use 'sass:map';
@use '../../../styles/const';

:host {
  --table-optional-display: none;
  --zebra-stripe: #{mix(black, rgb(242, 242, 247), 3%)}; // Gray6 Light

  @media (prefers-color-scheme: dark) {
    --zebra-stripe: #{mix(white, rgb(28, 28, 30), 3%)}; // Gray6 Dark
  }

  @media #{const.$breakpoint-small} {
    --app-grid: 1fr auto / 1fr;
    --app-gap: clamp(.75rem, .75rem + 1vw, 3rem);
    --app-padding-block: var(--app-gap) 0;
    --app-padding-inline: var(--app-gap);
    --footnote-display: none;
    --table-border-radius: var(--card-radius);
    --table-optional-display: table-cell;
    --values-place-self: start center;
  }

  @media #{const.$breakpoint-medium} {
    --app-grid: 'values drawer' 1fr 'currency drawer' / #{const.$values-min-size} 1fr;
    --app-padding-block: var(--app-gap);
    --drawer-margin-block: var(--app-gap) auto;
    --values-inset-block: var(--app-gap) auto;
    --values-position: sticky;
  }
}

:host {
  color: var(--text-color);
  display: grid;
  font-family: 'Avenir Variable', sans-serif;
  font-variation-settings: 'wght' 500;
  gap: var(--app-gap, 0);
  grid: var(--app-grid);
  inline-size: 100%;
  margin-inline: auto;
  max-inline-size: const.$app-max-size;
  min-block-size: 100dvh;
  padding-block: var(--app-padding-block);
  padding-inline: var(--app-padding-inline);
}

app-values {
  inset-block: var(--values-inset-block, 0);
  place-self: var(--values-place-self, center);
  position: var(--values-position, static);
}

app-drawer {
  margin-block: var(--drawer-margin-block, 0);

  &[aria-hidden='true'] {
    opacity: 0;
    visibility: hidden;
  }
}

// Scrollable wrapper for <table> element.
.table {
  border-radius: var(--table-border-radius, 0);
  overflow: auto hidden;
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

table {
  background-color: var(--fill-0);
  border-collapse: collapse;
  font-size: clamp(.8125rem, .8125rem + 1vw, 1rem);
  font-variant-numeric: tabular-nums;
  inline-size: 100%;
}

// [1] All cells are end-aligned by default since they contain numeric content.
// [2] First column, however, is start-aligned for readability.
:is(th, td) {
  line-height: 1;
  padding-block: .5em;
  padding-inline: 1em;
  text-align: end; // [1]
  white-space: nowrap;

  &:first-child {
    text-align: start; // [2]
  }
}

th {
  font-variation-settings: 'wght' 600;
}

tbody > tr:nth-child(odd) {
  background-color: var(--zebra-stripe);
}

table [data-optional] {
  display: var(--table-optional-display);
}

// Footnote after the table.
.footnote {
  color: var(--text-color-variant);
  display: var(--footnote-display);
  font-size: .75rem;
  margin-block: 1rem 0;
  margin-inline: 1rem;
  text-align: center;  
}

.footnote > span {
  color: var(--text-color);
}
