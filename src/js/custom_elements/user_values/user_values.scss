@use 'sass:math';
@use '../../../styles/const';

$total-size: 2rem;

:host {
  align-self: center;
  display: flex;
  flex-direction: column;
  grid-area: values;
  inset-block: var(--top) auto;
  justify-content: center;
  overflow: hidden;
  padding: const.$card-padding;
  position: var(--position);
}

ul {
  display: var(--list-display);
  flex-wrap: wrap;
  list-style: none;
  margin: var(--list-margin);
  padding: 0;
}

li {
  align-items: center;
  display: flex;
  flex: var(--item-flex);
  margin: 0 0 1rem;
}

label {
  flex: 1;
  line-height: 1;
  margin-inline-start: .5rem;
  opacity: .8;
  order: 2;
  white-space: nowrap;
}

[for='rate']::before {
  content: '% ';
}

input {
  block-size: 2rem;
  border-block-end: 2px solid var(--input-border-color);
  border-block-start: 2px solid transparent;
  border-radius: 0;
  font-family: 'Avenir Variable', sans-serif;
  font-size: inherit;
  inline-size: 5.5rem;
  line-height: 1;
  order: 1;
  padding: 0;
  text-align: end;

  &:focus {
    border-block-end-color: var(--theme-color);
    color: var(--theme-color);
  }

  &:focus:invalid {
    border-block-end-color: var(--warning-color);
    color: var(--warning-color);
  }

  &:not(:focus) {
    color: var(--primary-text-color);
  }
}

.total {
  block-size: $total-size;
  color: var(--theme-color);
  font-size: $total-size;
  line-height: $total-size;
  margin: var(--total-margin);
  max-inline-size: calc(100vw - #{2 * (const.$gap + const.$card-padding)});
  opacity: 1;
  overflow: hidden;
  text-align: var(--total-text-align);
  text-overflow: ellipsis;
  transition: opacity .3s, visibility .3s;
  visibility: visible;
}

.total[empty] {
  opacity: 0;
  visibility: hidden;
}

// Reorder fields for side-by-side layout at small breakpoint.
@media #{map.get(const.$breakpoint, small)} {
  :host {
    align-self: start;
    background: var(--background-1);
    border: 1px solid var(--card-border-color);
    border-radius: const.$card-border-radius;
  }

  [field='principal'] {
    order: 1;
  }

  [field='rate'] {
    order: 2;
  }

  [field='contribution'] {
    order: 3;
  }

  [field='periods'] {
    order: 4;
  }
}
